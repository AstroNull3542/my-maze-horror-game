<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Maze</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Pixelify+Sans:wght@400..700&display=swap" rel="stylesheet">
    <style>
      body {
        background-color: black;
        margin: 0;
        overflow-x: hidden;
      }

      /* OBJECT */

      .floor1 {
        background-image: url("./sprite/floor/floor1.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .floor2 {
        background-image: url("./sprite/floor/floor2.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .floor3 {
        background-image: url("./sprite/floor/floor3.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .floor4 {
        background-image: url("./sprite/floor/floor4.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .floor5 {
        background-image: url("./sprite/floor/floor5.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .floor6 {
        background-image: url("./sprite/floor/floor6.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .floor7 {
        background-image: url("./sprite/floor/floor7.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .floor8 {
        background-image: url("./sprite/floor/floor8.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .floor9 {
        background-image: url("./sprite/floor/floor9.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .floor10 {
        background-image: url("./sprite/floor/floor10.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .floor11 {
        background-image: url("./sprite/floor/floor11.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .floor12 {
        background-image: url("./sprite/floor/floor12.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .floor13 {
        background-image: url("./sprite/floor/floor13.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .floor14 {
        background-image: url("./sprite/floor/floor14.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .floor15 {
        background-image: url("./sprite/floor/floor15.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }

      .wall1 {
        background-image: url("./sprite/wall/wall1.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .wall2 {
        background-image: url("./sprite/wall/wall2.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .wall3 {
        background-image: url("./sprite/wall/wall3.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .wall4 {
        background-image: url("./sprite/wall/wall4.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .wall5 {
        background-image: url("./sprite/wall/wall5.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .wall6 {
        background-image: url("./sprite/wall/wall6.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .wall7 {
        background-image: url("./sprite/wall/wall7.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .wall8 {
        background-image: url("./sprite/wall/wall8.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .wall9 {
        background-image: url("./sprite/wall/wall9.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .wall10 {
        background-image: url("./sprite/wall/wall10.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .wall11 {
        background-image: url("./sprite/wall/wall11.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .wall12 {
        background-image: url("./sprite/wall/wall12.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .wall13 {
        background-image: url("./sprite/wall/wall13.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .wall14 {
        background-image: url("./sprite/wall/wall14.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .wall15 {
        background-image: url("./sprite/wall/wall15.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }

      .glitch1 {
        background-image: url("./sprite/wall/glitch/glitch1.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .glitch2 {
        background-image: url("./sprite/wall/glitch/glitch2.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .glitch3 {
        background-image: url("./sprite/wall/glitch/glitch3.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .glitch4 {
        background-image: url("./sprite/wall/glitch/glitch4.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .glitch5 {
        background-image: url("./sprite/wall/glitch/glitch5.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .glitch6 {
        background-image: url("./sprite/wall/glitch/glitch6.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .glitch7 {
        background-image: url("./sprite/wall/glitch/glitch7.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .glitch8 {
        background-image: url("./sprite/wall/glitch/glitch8.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .glitch9 {
        background-image: url("./sprite/wall/glitch/glitch9.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .glitch10 {
        background-image: url("./sprite/wall/glitch/glitch10.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .glitch11 {
        background-image: url("./sprite/wall/glitch/glitch11.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .glitch12 {
        background-image: url("./sprite/wall/glitch/glitch12.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .glitch13 {
        background-image: url("./sprite/wall/glitch/glitch13.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .glitch14 {
        background-image: url("./sprite/wall/glitch/glitch14.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .glitch15 {
        background-image: url("./sprite/wall/glitch/glitch15.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }

      .gate1 {
        background-image: url("./sprite/gate/gate1.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .gate2 {
        background-image: url("./sprite/gate/gate2.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .gate3 {
        background-image: url("./sprite/gate/gate3.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .gate4 {
        background-image: url("./sprite/gate/gate4.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .gate5 {
        background-image: url("./sprite/gate/gate5.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .gate6 {
        background-image: url("./sprite/gate/gate6.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .gate7 {
        background-image: url("./sprite/gate/gate7.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .gate8 {
        background-image: url("./sprite/gate/gate8.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .gate9 {
        background-image: url("./sprite/gate/gate9.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .gate10 {
        background-image: url("./sprite/gate/gate10.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .gate11 {
        background-image: url("./sprite/gate/gate11.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .gate12 {
        background-image: url("./sprite/gate/gate12.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .gate13 {
        background-image: url("./sprite/gate/gate13.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .gate14 {
        background-image: url("./sprite/gate/gate14.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .gate15 {
        background-image: url("./sprite/gate/gate15.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }

      /* DARK */

      .floor1_dark {
        background-image: url("./sprite/floor_dark/floor1_dark.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .floor2_dark {
        background-image: url("./sprite/floor_dark/floor2_dark.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .floor3_dark {
        background-image: url("./sprite/floor_dark/floor3_dark.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .floor4_dark {
        background-image: url("./sprite/floor_dark/floor4_dark.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .floor5_dark {
        background-image: url("./sprite/floor_dark/floor5_dark.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .floor6_dark {
        background-image: url("./sprite/floor_dark/floor6_dark.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .floor7_dark {
        background-image: url("./sprite/floor_dark/floor7_dark.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .floor8_dark {
        background-image: url("./sprite/floor_dark/floor8_dark.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .floor9_dark {
        background-image: url("./sprite/floor_dark/floor9_dark.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .floor10_dark {
        background-image: url("./sprite/floor_dark/floor10_dark.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .floor11_dark {
        background-image: url("./sprite/floor_dark/floor11_dark.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .floor12_dark {
        background-image: url("./sprite/floor_dark/floor12_dark.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .floor13_dark {
        background-image: url("./sprite/floor_dark/floor13_dark.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .floor14_dark {
        background-image: url("./sprite/floor_dark/floor14_dark.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .floor15_dark {
        background-image: url("./sprite/floor_dark/floor15_dark.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }

      .wall1_dark {
        background-image: url("./sprite/wall_dark/wall1_dark.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .wall2_dark {
        background-image: url("./sprite/wall_dark/wall2_dark.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .wall3_dark {
        background-image: url("./sprite/wall_dark/wall3_dark.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .wall4_dark {
        background-image: url("./sprite/wall_dark/wall4_dark.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .wall5_dark {
        background-image: url("./sprite/wall_dark/wall5_dark.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .wall6_dark {
        background-image: url("./sprite/wall_dark/wall6_dark.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .wall7_dark {
        background-image: url("./sprite/wall_dark/wall7_dark.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .wall8_dark {
        background-image: url("./sprite/wall_dark/wall8_dark.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .wall9_dark {
        background-image: url("./sprite/wall_dark/wall9_dark.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .wall10_dark {
        background-image: url("./sprite/wall_dark/wall10_dark.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .wall11_dark {
        background-image: url("./sprite/wall_dark/wall11_dark.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .wall12_dark {
        background-image: url("./sprite/wall_dark/wall12_dark.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .wall13_dark {
        background-image: url("./sprite/wall_dark/wall13_dark.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .wall14_dark {
        background-image: url("./sprite/wall_dark/wall14_dark.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .wall15_dark {
        background-image: url("./sprite/wall_dark/wall15_dark.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }

      .gate1_dark {
        background-image: url("./sprite/gate_dark/gate1_dark.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .gate2_dark {
        background-image: url("./sprite/gate_dark/gate2_dark.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .gate3_dark {
        background-image: url("./sprite/gate_dark/gate3_dark.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .gate4_dark {
        background-image: url("./sprite/gate_dark/gate4_dark.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .gate5_dark {
        background-image: url("./sprite/gate_dark/gate5_dark.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .gate6_dark {
        background-image: url("./sprite/gate_dark/gate6_dark.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .gate7_dark {
        background-image: url("./sprite/gate_dark/gate7_dark.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .gate8_dark {
        background-image: url("./sprite/gate_dark/gate8_dark.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .gate9_dark {
        background-image: url("./sprite/gate_dark/gate9_dark.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .gate10_dark {
        background-image: url("./sprite/gate_dark/gate10_dark.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .gate11_dark {
        background-image: url("./sprite/gate_dark/gate11_dark.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .gate12_dark {
        background-image: url("./sprite/gate_dark/gate12_dark.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .gate13_dark {
        background-image: url("./sprite/gate_dark/gate13_dark.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .gate14_dark {
        background-image: url("./sprite/gate_dark/gate14_dark.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .gate15_dark {
        background-image: url("./sprite/gate_dark/gate15_dark.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }

      /* PROPERTY */

      .key1 {
        background-image: url("./sprite/key/key1.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .key2 {
        background-image: url("./sprite/key/key2.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .key3 {
        background-image: url("./sprite/key/key3.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .key4 {
        background-image: url("./sprite/key/key4.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .key5 {
        background-image: url("./sprite/key/key5.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .key6 {
        background-image: url("./sprite/key/key6.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .key7 {
        background-image: url("./sprite/key/key7.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .key8 {
        background-image: url("./sprite/key/key8.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .key9 {
        background-image: url("./sprite/key/key9.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .key10 {
        background-image: url("./sprite/key/key10.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .key11 {
        background-image: url("./sprite/key/key11.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .key12 {
        background-image: url("./sprite/key/key12.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .key13 {
        background-image: url("./sprite/key/key13.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .key14 {
        background-image: url("./sprite/key/key14.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .key15 {
        background-image: url("./sprite/key/key15.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }

      .key1_empty {
        background-image: url("./sprite/key_empty/key1_empty.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .key2_empty {
        background-image: url("./sprite/key_empty/key2_empty.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .key3_empty {
        background-image: url("./sprite/key_empty/key3_empty.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .key4_empty {
        background-image: url("./sprite/key_empty/key4_empty.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .key5_empty {
        background-image: url("./sprite/key_empty/key5_empty.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .key6_empty {
        background-image: url("./sprite/key_empty/key6_empty.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .key7_empty {
        background-image: url("./sprite/key_empty/key7_empty.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .key8_empty {
        background-image: url("./sprite/key_empty/key8_empty.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .key9_empty {
        background-image: url("./sprite/key_empty/key9_empty.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .key10_empty {
        background-image: url("./sprite/key_empty/key10_empty.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .key11_empty {
        background-image: url("./sprite/key_empty/key11_empty.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .key12_empty {
        background-image: url("./sprite/key_empty/key12_empty.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .key13_empty {
        background-image: url("./sprite/key_empty/key13_empty.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .key14_empty {
        background-image: url("./sprite/key_empty/key14_empty.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .key15_empty {
        background-image: url("./sprite/key_empty/key15_empty.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }

      .switch1 {
        background-image: url("./sprite/switch/switch1.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .switch2 {
        background-image: url("./sprite/switch/switch2.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .switch3 {
        background-image: url("./sprite/switch/switch3.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .switch4 {
        background-image: url("./sprite/switch/switch4.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .switch5 {
        background-image: url("./sprite/switch/switch5.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .switch6 {
        background-image: url("./sprite/switch/switch6.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .switch7 {
        background-image: url("./sprite/switch/switch7.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .switch8 {
        background-image: url("./sprite/switch/switch8.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .switch9 {
        background-image: url("./sprite/switch/switch9.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .switch10 {
        background-image: url("./sprite/switch/switch10.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .switch11 {
        background-image: url("./sprite/switch/switch11.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .switch12 {
        background-image: url("./sprite/switch/switch12.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .switch13 {
        background-image: url("./sprite/switch/switch13.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .switch14 {
        background-image: url("./sprite/switch/switch14.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .switch15 {
        background-image: url("./sprite/switch/switch15.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }

      .switch1_on {
        background-image: url("./sprite/switch_on/switch1_on.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .switch2_on {
        background-image: url("./sprite/switch_on/switch2_on.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .switch3_on {
        background-image: url("./sprite/switch_on/switch3_on.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .switch4_on {
        background-image: url("./sprite/switch_on/switch4_on.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .switch5_on {
        background-image: url("./sprite/switch_on/switch5_on.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .switch6_on {
        background-image: url("./sprite/switch_on/switch6_on.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .switch7_on {
        background-image: url("./sprite/switch_on/switch7_on.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .switch8_on {
        background-image: url("./sprite/switch_on/switch8_on.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .switch9_on {
        background-image: url("./sprite/switch_on/switch9_on.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .switch10_on {
        background-image: url("./sprite/switch_on/switch10_on.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .switch11_on {
        background-image: url("./sprite/switch_on/switch11_on.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .switch12_on {
        background-image: url("./sprite/switch_on/switch12_on.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .switch13_on {
        background-image: url("./sprite/switch_on/switch13_on.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .switch14_on {
        background-image: url("./sprite/switch_on/switch14_on.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .switch15_on {
        background-image: url("./sprite/switch_on/switch15_on.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }

      .door1 {
        background-image: url("./sprite/door/door1.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .door2 {
        background-image: url("./sprite/door/door2.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .door3 {
        background-image: url("./sprite/door/door3.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .door4 {
        background-image: url("./sprite/door/door4.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .door5 {
        background-image: url("./sprite/door/door5.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .door6 {
        background-image: url("./sprite/door/door6.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .door7 {
        background-image: url("./sprite/door/door7.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .door8 {
        background-image: url("./sprite/door/door8.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .door9 {
        background-image: url("./sprite/door/door9.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .door10 {
        background-image: url("./sprite/door/door10.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .door11 {
        background-image: url("./sprite/door/door11.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .door12 {
        background-image: url("./sprite/door/door12.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .door13 {
        background-image: url("./sprite/door/door13.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .door14 {
        background-image: url("./sprite/door/door14.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .door15 {
        background-image: url("./sprite/door/door15.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }

      /* MISCELLANEOUS */

      .flashlight_off {
        background-image: url("./sprite/flashlight_off.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
        scale: 1.002;
        transform: translateY(3px);
      }

      .flashlight1 {
        background-image: url("./sprite/flashlight/flashlight1.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .flashlight2 {
        background-image: url("./sprite/flashlight/flashlight2.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .flashlight3 {
        background-image: url("./sprite/flashlight/flashlight3.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .flashlight4 {
        background-image: url("./sprite/flashlight/flashlight4.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .flashlight5 {
        background-image: url("./sprite/flashlight/flashlight5.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .flashlight6 {
        background-image: url("./sprite/flashlight/flashlight6.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .flashlight7 {
        background-image: url("./sprite/flashlight/flashlight7.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .flashlight8 {
        background-image: url("./sprite/flashlight/flashlight8.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .flashlight9 {
        background-image: url("./sprite/flashlight/flashlight9.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }

      .flashlight1_dark {
        background-image: url("./sprite/flashlight_dark/flashlight1_dark.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
        scale: 1.001;
        transform: translateY(1.7px);
      }
      .flashlight2_dark {
        background-image: url("./sprite/flashlight_dark/flashlight2_dark.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
        scale: 1.001;
        transform: translateY(1.7px);
      }
      .flashlight3_dark {
        background-image: url("./sprite/flashlight_dark/flashlight3_dark.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
        scale: 1.001;
        transform: translateY(1.7px);
      }
      .flashlight4_dark {
        background-image: url("./sprite/flashlight_dark/flashlight4_dark.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
        scale: 1.001;
        transform: translateY(1.7px);
      }
      .flashlight5_dark {
        background-image: url("./sprite/flashlight_dark/flashlight5_dark.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
        scale: 1.001;
        transform: translateY(1.7px);
      }
      .flashlight6_dark {
        background-image: url("./sprite/flashlight_dark/flashlight6_dark.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
        scale: 1.001;
        transform: translateY(1.7px);
      }
      .flashlight7_dark {
        background-image: url("./sprite/flashlight_dark/flashlight7_dark.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
        scale: 1.001;
        transform: translateY(1.7px);
      }
      .flashlight8_dark {
        background-image: url("./sprite/flashlight_dark/flashlight8_dark.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
        scale: 1.001;
        transform: translateY(1.7px);
      }
      .flashlight9_dark {
        background-image: url("./sprite/flashlight_dark/flashlight9_dark.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
        scale: 1.001;
        transform: translateY(1.7px);
      }

      .blackout {
        background-image: url("./sprite/blackout.png");
        background-repeat: repeat;
        background-size: contain;
        height: 100cm;
      }

      .spike1 {
        background-image: url("./sprite/spike/spike1.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .spike2 {
        background-image: url("./sprite/spike/spike2.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .spike3 {
        background-image: url("./sprite/spike/spike3.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }
      .spike4 {
        background-image: url("./sprite/spike/spike4.png");
        background-repeat: no-repeat;
        background-size: contain;
        height: 100cm;
      }

      .died {
        background-image: url("./sprite/died.png");
        background-repeat: repeat;
        background-size: contain;
        height: 100cm;
      }

      .map1 {
        z-index: 10;
        position: absolute;
        top: 0cm;
        left: 0cm;
        background-color: white;
        border: solid 1px lightgray;
        width: 0.6cm;
        height: 0.6cm;
        display: block;
      }
      .map2 {
        z-index: 10;
        position: absolute;
        top: 0cm;
        left: 0.6cm;
        background-color: white;
        border: solid 1px lightgray;
        width: 0.6cm;
        height: 0.6cm;
        display: block;
      }
      .map3 {
        z-index: 10;
        position: absolute;
        top: 0cm;
        left: 1.2cm;
        background-color: white;
        border: solid 1px lightgray;
        width: 0.6cm;
        height: 0.6cm;
        display: block;
      }
      .map4 {
        z-index: 10;
        position: absolute;
        top: 0.6cm;
        left: 0cm;
        background-color: white;
        border: solid 1px lightgray;
        width: 0.6cm;
        height: 0.6cm;
        display: block;
      }
      .map5 {
        z-index: 10;
        position: absolute;
        top: 0.6cm;
        left: 0.6cm;
        background-color: white;
        border: solid 1px lightgray;
        width: 0.6cm;
        height: 0.6cm;
        display: block;
      }
      .map6 {
        z-index: 10;
        position: absolute;
        top: 0.6cm;
        left: 1.2cm;
        background-color: white;
        border: solid 1px lightgray;
        width: 0.6cm;
        height: 0.6cm;
        display: block;
      }
      .map7 {
        z-index: 10;
        position: absolute;
        top: 1.2cm;
        left: 0cm;
        background-color: white;
        border: solid 1px lightgray;
        width: 0.6cm;
        height: 0.6cm;
        display: block;
      }
      .map8 {
        z-index: 10;
        position: absolute;
        top: 1.2cm;
        left: 0.6cm;
        background-color: white;
        border: solid 1px lightgray;
        width: 0.6cm;
        height: 0.6cm;
        display: block;
      }
      .map9 {
        z-index: 10;
        position: absolute;
        top: 1.2cm;
        left: 1.2cm;
        background-color: white;
        border: solid 1px lightgray;
        width: 0.6cm;
        height: 0.6cm;
        display: block;
      }
      .minimap {
        z-index: 10;
        position: absolute;
        top: 1cm;
        left: 1cm;
        width: 1.8cm;
        height: 1.8cm;
        display: none;
      }
      .dirindicator {
        z-index: 11;
        position: absolute;
        top: 1.65cm;
        left: 1.65cm;
        background-image: url("./sprite/arrow/up-arrow.png");
        background-repeat: no-repeat;
        background-size: 0.5cm;
        background-position: center;
        border-radius: 10cm;
        border: none;
        width: 0.5cm;
        height: 0.5cm;
        display: block;
      }
      .opacity50 {
        opacity: 0.5;
      }

      @media screen and (min-width: 768px) {
        .margintop {
          display: none;
        }
        .keycount {
          font-family: "Pixelify Sans", sans-serif;
          text-align: center;
          opacity: 0;
          margin: 0;
          position: absolute;
          top: 1cm;
          right: 1cm;
        }
        .text {
          font-family: "Pixelify Sans", sans-serif;
          text-align: center;
          opacity: 0;
          margin: 0;
          position: absolute;
          top: 50vh;
          left: 50%;
          -ms-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
        }
        .buttonup {
          display: none;
        }
        .buttondown {
          display: none;
        }
        .buttonleft {
          display: none;
        }
        .buttonright {
          display: none;
        }
        .buttonturnleft {
          display: none;
        }
        .buttonturnright {
          display: none;
        }
      }
      
      @media screen and (orientation: portrait) and (max-width: 767px) {
        .margintop {
          height: 1cm;
        }
        .keycount {
          font-family: "Pixelify Sans", sans-serif;
          text-align: center;
          opacity: 0;
          margin: 0;
          position: absolute;
          top: 0;
          right: 5%;
        }
        .text {
          font-family: "Pixelify Sans", sans-serif;
          text-align: center;
          opacity: 0;
          margin: 0;
          position: absolute;
          top: 25vh;
          left: 50%;
          -ms-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
        }
        .buttonup {
          z-index: 10;
          position: absolute;
          bottom: 4cm;
          background-image: url("./sprite/arrow/up-arrow.png");
          background-repeat: no-repeat;
          background-size: contain;
          background-position: center;
          background-color: transparent;
          filter: invert(1);
          border: none;
          width: 100%;
          height: 2cm;
          display: block;
        }
        .buttondown {
          z-index: 10;
          position: absolute;
          bottom: 0;
          background-image: url("./sprite/arrow/down-arrow.png");
          background-repeat: no-repeat;
          background-size: contain;
          background-position: center;
          background-color: transparent;
          filter: invert(1);
          border: none;
          width: 100%;
          height: 2cm;
          display: block;
        }
        .buttonleft {
          z-index: 10;
          position: absolute;
          bottom: 2cm;
          left: 1cm;
          background-image: url("./sprite/arrow/left-arrow.png");
          background-repeat: no-repeat;
          background-size: contain;
          background-color: transparent;
          filter: invert(1);
          border: none;
          width: 40%;
          height: 2cm;
          display: block;
        }
        .buttonright {
          z-index: 10;
          position: absolute;
          bottom: 2cm;
          right: 1cm;
          background-image: url("./sprite/arrow/right-arrow.png");
          background-repeat: no-repeat;
          background-size: contain;
          background-position: right;
          background-color: transparent;
          filter: invert(1);
          border: none;
          width: 40%;
          height: 2cm;
          display: block;
        }
        .buttonturnleft {
          z-index: 10;
          position: absolute;
          bottom: 6cm;
          left: 1cm;
          background-image: url("./sprite/arrow/left-arrow.png");
          background-repeat: no-repeat;
          background-size: 1cm;
          background-position: left;
          background-color: transparent;
          filter: invert(1);
          border: none;
          width: 40%;
          height: 2cm;
          display: block;
        }
        .buttonturnright {
          z-index: 10;
          position: absolute;
          bottom: 6cm;
          right: 1cm;
          background-image: url("./sprite/arrow/right-arrow.png");
          background-repeat: no-repeat;
          background-size: 1cm;
          background-position: right;
          background-color: transparent;
          filter: invert(1);
          border: none;
          width: 40%;
          height: 2cm;
          display: block;
        }
      }

      @media screen and (orientation: landscape) and (max-width: 1024px) {
        .margintop {
          height: 1cm;
        }
        .keycount {
          font-family: "Pixelify Sans", sans-serif;
          text-align: center;
          opacity: 0;
          margin: 0;
          position: absolute;
          top: 0;
          right: 5%;
        }
        .text {
          font-family: "Pixelify Sans", sans-serif;
          text-align: center;
          opacity: 0;
          margin: 0;
          position: absolute;
          top: 40vh;
          left: 50%;
          -ms-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
        }
        .buttonup {
          z-index: 10;
          position: absolute;
          bottom: 4cm;
          left: 1cm;
          background-image: url("./sprite/arrow/up-arrow.png");
          background-repeat: no-repeat;
          background-size: contain;
          background-position: center;
          background-color: transparent;
          filter: invert(1);
          border: none;
          width: 6cm;
          height: 2cm;
          display: block;
        }
        .buttondown {
          z-index: 10;
          position: absolute;
          bottom: 0;
          left: 1cm;
          background-image: url("./sprite/arrow/down-arrow.png");
          background-repeat: no-repeat;
          background-size: contain;
          background-position: center;
          background-color: transparent;
          filter: invert(1);
          border: none;
          width: 6cm;
          height: 2cm;
          display: block;
        }
        .buttonleft {
          z-index: 10;
          position: absolute;
          bottom: 2cm;
          left: 1cm;
          background-image: url("./sprite/arrow/left-arrow.png");
          background-repeat: no-repeat;
          background-size: contain;
          background-position: left;
          background-color: transparent;
          filter: invert(1);
          border: none;
          width: 3cm;
          height: 2cm;
          display: block;
        }
        .buttonright {
          z-index: 10;
          position: absolute;
          bottom: 2cm;
          left: 4cm;
          background-image: url("./sprite/arrow/right-arrow.png");
          background-repeat: no-repeat;
          background-size: contain;
          background-position: right;
          background-color: transparent;
          filter: invert(1);
          border: none;
          width: 3cm;
          height: 2cm;
          display: block;
        }
        .buttonturnleft {
          z-index: 10;
          position: absolute;
          bottom: 1cm;
          right: 3cm;
          background-image: url("./sprite/arrow/left-arrow.png");
          background-repeat: no-repeat;
          background-size: 1cm;
          background-position: left center;
          background-color: transparent;
          filter: invert(1);
          border: none;
          width: 2cm;
          height: 3cm;
          display: block;
        }
        .buttonturnright {
          z-index: 10;
          position: absolute;
          bottom: 1cm;
          right: 1cm;
          background-image: url("./sprite/arrow/right-arrow.png");
          background-repeat: no-repeat;
          background-size: 1cm;
          background-position: right center;
          background-color: transparent;
          filter: invert(1);
          border: none;
          width: 2cm;
          height: 3cm;
          display: block;
        }
      }
      
      #load {
        opacity: 0;
        background-color: black;
      }

      .offset {
        transform: translateX(5px)
      }
      .offset > * {
        transform: translateX(-5px)
      }
      .offset2 {
        transform: translateX(-5px)
      }
      .offset2 > * {
        transform: translateX(5px)
      }

      @keyframes shake {
        0%, 100% { transform: translate(0, 0); }
        9% { transform: translate(-5px, -1px); }
        18% { transform: translate(5px, 0); }
        27% { transform: translate(-4px, -1px); }
        36% { transform: translate(4px, 0); }
        45% { transform: translate(-3px, 1px); }
        55% { transform: translate(3px, 0); }
        64% { transform: translate(-2px, -1px); }
        73% { transform: translate(2px, 1px); }
        82% { transform: translate(-1px, 0); }
        91% { transform: translate(1px, 1px); }
      }
      .shake {
        animation: shake 0.5s;
      }

      @keyframes fall {
        0% {
          transform: translate(-50%, -200%);
        }
        33% {
          transform: translate(-50%, -200%);
        }
        100% {
          transform: translate(-50%, 100%);
        }
      }
      .fall {
        animation: fall 1.5s ease-in;
      }
    </style>
  </head>
  <body id="body" style="overflow-y: hidden;">
    <p class="text" id="loading" style="color: white; font-size: xx-large; opacity: 100%;">Loading... (0/205)</p>
    <div id="load">

      <div class="margintop" id="margintop"></div>
      <button class="buttonup" id="buttonup"></button>
      <button class="buttondown" id="buttondown"></button>
      <button class="buttonleft" id="buttonleft"></button>
      <button class="buttonright" id="buttonright"></button>
      <button class="buttonturnleft" id="buttonturnleft"></button>
      <button class="buttonturnright" id="buttonturnright"></button>

      <div class="minimap" id="minimap">
        <div class="map1" id="map1"></div>
        <div class="map2" id="map2"></div>
        <div class="map3" id="map3"></div>
        <div class="map4" id="map4"></div>
        <div class="map5" id="map5"></div>
        <div class="map6" id="map6"></div>
        <div class="map7" id="map7"></div>
        <div class="map8" id="map8"></div>
        <div class="map9" id="map9"></div>
      </div>

      <div class="text" id="keybind" style="color: white; font-size: xx-large; opacity: 0; display: flex; flex-direction: column; align-items: center; gap: 10px">
        <div style="display: flex; gap: 30px;">
          <div>(E)<br>Interact</div>
          <div>(F)<br>Flashlight</div>
        </div>
        <div style="display: flex; justify-content: space-between; align-items: center; gap: 10px; width: 100%;">
          <div>&lt;</div>
          <div style="text-align: center;">
            W<br>
            A S D
          </div>
          <div>&gt;</div>
        </div>
      </div>

      <input type="text" id="inputmap" style="z-index: 10; color:black; display: none; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">
      <img src="./sprite/other/hm.png" id="hm" style="z-index: 10; position: absolute; top: 38%; left: 50%; transform: translate(-50%, -50%); display: none; opacity: 7%;" width="100" height="100">
      <img src="./sprite/other/spark.png" id="spark" style="z-index: 10; position: absolute; top: 56%; left: 50%; transform: translate(-50%, -50%); display: none; opacity: 25%;" width="20" height="20">
      <img src="./sprite/other/dust.png" id="dust" style="position: absolute; top: 38%; left: 50%; transform: translate(-50%, -50%); width: 500px; opacity: 10%; display: none;">

      <div class="dirindicator" id="dirindicator"></div>
      <div class="" id="pos15_object">
        <div class="" id="pos15_property">
          <div class="" id="pos15_dark">
            <div class="" id="pos14_object">
              <div class="" id="pos14_property">
                <div class="" id="pos14_dark">
                  <div class="" id="pos13_object">
                    <div class="" id="pos13_property">
                      <div class="" id="pos13_dark">
                        <div class="" id="pos9_object">
                          <div class="" id="pos9_property">
                            <div class="" id="pos9_dark">
                              <div class="" id="pos10_object">
                                <div class="" id="pos10_property">
                                  <div class="" id="pos10_dark">
                                    <div class="" id="pos11_object">
                                      <div class="" id="pos11_property">
                                        <div class="" id="pos11_dark">
                                          <div class="" id="pos12_object">
                                            <div class="" id="pos12_property">
                                              <div class="" id="pos12_dark">
                                                <div class="" id="pos8_object">
                                                  <div class="" id="pos8_property">
                                                    <div class="" id="pos8_dark">
                                                      <div class="" id="pos7_object">
                                                        <div class="" id="pos7_property">
                                                          <div class="" id="pos7_dark">
                                                            <div class="" id="pos4_object">
                                                              <div class="" id="pos4_property">
                                                                <div class="" id="pos4_dark">
                                                                  <div class="" id="pos5_object">
                                                                    <div class="" id="pos5_property">
                                                                      <div class="" id="pos5_dark">
                                                                        <div class="" id="pos6_object">
                                                                          <div class="" id="pos6_property">
                                                                            <div class="" id="pos6_dark">
                                                                              <div class="" id="pos3_object">
                                                                                <div class="" id="pos3_property">
                                                                                  <div class="" id="pos3_dark">
                                                                                    <div class="" id="pos1_object">
                                                                                      <div class="" id="pos1_property">
                                                                                        <div class="" id="pos1_dark">
                                                                                          <div class="" id="pos2_object">
                                                                                            <div class="" id="pos2_property">
                                                                                              <div class="" id="pos2_dark">

                                                                                                <div class="" id="flashlight">
                                                                                                  <div class="" id="flashlight_off">
                                                                                                    <div class="" id="blackout">
                                                                                                      <div class="" id="spike1">
                                                                                                        <div class="" id="spike2">
                                                                                                          <div class="" id="spike3">
                                                                                                            <div class="" id="spike4">
                                                                                                              <div class="" id="died">
                                                                                                                
                                                                                                                <p class="text" id="locked" style="color: black; font-size: x-large; opacity: 0; text-shadow: 0px 0px 2px #fff;">Its locked</p>
                                                                                                                <div id="keycountopacity" class="keycount" style="color: white; font-size: x-large; opacity: 1; text-shadow: 0px 0px 2px #000; display: flex; align-items: center; gap: 5px;"><p id="keycount" style="margin: 0;">0</p><img src="./sprite/key/keycount.png" width="30"></div>

                                                                                                                <div class="blackout" id="blackout2"></div>

                                                                                                                <h1 class="text" id="tips" style="font-size: xx-large; font-weight: normal;">
                                                                                                                  YOU DIED<br>Press R to Reset
                                                                                                                  <p style="font-size: large;" id="deathmsg">
                                                                                                                    Tips: [No Tips]
                                                                                                                  </p>
                                                                                                                </h1>
                                                                                                                <p class="text" id="click" style="color: white; font-size: xx-large;">
                                                                                                                  Click to start
                                                                                                                </p>

                                                                                                              </div>
                                                                                                            </div>
                                                                                                          </div>
                                                                                                        </div>
                                                                                                      </div>
                                                                                                    </div>
                                                                                                  </div>
                                                                                                </div>
                                                                                              </div>
                                                                                            </div>
                                                                                          </div>
                                                                                        </div>
                                                                                      </div>
                                                                                    </div>
                                                                                  </div>
                                                                                </div>
                                                                              </div>
                                                                            </div>
                                                                          </div>
                                                                        </div>
                                                                      </div>
                                                                    </div>
                                                                  </div>
                                                                </div>
                                                              </div>
                                                            </div>
                                                          </div>
                                                        </div>
                                                      </div>
                                                    </div>
                                                  </div>
                                                </div>
                                              </div>
                                            </div>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="./mapGenerator.js"></script>
    <script>
      const script = document.createElement('script');
      script.src = 'data.js?v=' + Date.now();
      script.onload = () => {
        const defaultmap = Object.fromEntries(
          Object.entries(maps).map(([key, value]) => [key, Object.freeze(value)])
        );
        let current_map = defaultmap["map1"];//the first map
        let lvl_map = current_map.lvl_map;
        let default_position = [...current_map.position];
        let default_direction = current_map.direction;
        let default_flashlight = 1;
        let default_map = JSON.parse(JSON.stringify(current_map.map));
        class randoms {
          get(str) {
            switch (str) {
              case "pos":
                return [...this.randomposition];
              case "dir":
                return this.randomdirection;
              case "map":
                return this.randommap.map(row => [...row]);
            }
          }
          set() {
            let size = Math.floor(Math.random() * 11) + 10;
            this.randomposition = [Math.floor(Math.random() * size), Math.floor(Math.random() * size)];
            let dirrandom = ["north", "east", "south", "west"];
            this.randomdirection = dirrandom[Math.floor(Math.random() * dirrandom.length)];
            this.randommap = generateMap(size, size, this.randomposition);
          }
        }
        const r = new randoms();
        function changemap(map) {
          current_map = map;
          lvl_map = current_map.lvl_map;
          if (lvl_map === null) {
            lvl_map = 1;
          }
          if(map == defaultmap["random"]) {
            r.set();
            default_position = r.get("pos");
            default_direction = r.get("dir");
            default_map = r.get("map");
          } else {
            default_map = JSON.parse(JSON.stringify(current_map.map));
            default_position = [...current_map.position];
            default_direction = current_map.direction;
          }
        }
        let lockedtimeout;
        function nextmap() {//MAP CHANGER BETWEEN LEVELS
          if(key > 0) {
            if(Math.random() > 0.2) {
              if(lvl_map == null) {
                restart(defaultmap["map1"])
              } else if(lvl_map == 1) {
                restart(defaultmap["map2"]);
              } else if(lvl_map == 2) {
                restart(defaultmap["map1"]);
              }
            } else {
              locked.textContent = "Jammed";
              locked.style.opacity = "1";
              clearTimeout(lockedtimeout);
              lockedtimeout = setTimeout(() => {
                locked.style.opacity = "0.5";
                lockedtimeout = setTimeout(() => {
                  locked.style.opacity = "0";
                }, 200);
              }, 200);
            }
          } else {
            locked.textContent = "Its Locked";
            locked.style.opacity = "1";
            clearTimeout(lockedtimeout);
            lockedtimeout = setTimeout(() => {
              locked.style.opacity = "0.5";
              lockedtimeout = setTimeout(() => {
                locked.style.opacity = "0";
              }, 200);
            }, 1000);
          }
        }

        setInterval(() => {
          if (current_map == defaultmap["random"]) {
            default_position = r.get("pos");
            default_direction = r.get("dir");
            default_map = r.get("map");
          } else {
            default_map = JSON.parse(JSON.stringify(current_map.map));
            default_position = [...current_map.position];
            default_direction = current_map.direction;
          }
          
          if (alive) {
            const suffix = darkness ? '_dark' : '';
            const baseClass = flashlight.className.replace('_dark', '');
            const transitions = {
              flashlight1: () => {
                default_flashlight = 1;
                if(darkness && Math.random() < 0.2 && flashlight_off.className != 'flashlight_off') {
                  clearTimeout(minimaptimeout)
                  let count = 0;
                  const toggle = () => {
                    const isOn = count % 2 == 0;
                    flashlight_off.className = isOn ? 'flashlight_off opacity50' : '';
                    minimap.style.opacity = isOn ? "0.5" : "1";
                    count++;
                    if (count < 5 * 2) {
                      setTimeout(toggle, 50);
                    }
                  };
                  toggle();
                } else if (Math.random() < 0.2) {
                  document.getElementById("load").classList.add('shake');
                  document.getElementById("dust").style.display = "block";
                  document.getElementById("dust").style.opacity = "10%";
                  document.getElementById("dust").classList.add('fall');
                  setTimeout(() => {
                    document.getElementById("load").classList.remove('shake');
                    setTimeout(() => {
                      document.getElementById("dust").style.opacity = "8%";
                      setTimeout(() => {
                        document.getElementById("dust").style.opacity = "6%";
                        setTimeout(() => {
                          document.getElementById("dust").style.opacity = "4%";
                          setTimeout(() => {
                            document.getElementById("dust").style.opacity = "2%";
                            setTimeout(() => {
                              document.getElementById("dust").style.display = "none";
                              document.getElementById("dust").classList.remove('fall');
                              void document.getElementById("dust").offsetWidth;
                            }, 190);
                          }, 200);
                        }, 200);
                      }, 200);
                    }, 200);
                  }, 500);
                } else if (darkness && Math.random() < 0.2 && flashlight_off.className != 'flashlight_off') {
                  let loopCount = 0;
                  function runSparkEffect() {
                    if (loopCount >= 5) return;
                    const spark = document.getElementById("spark");
                    spark.style.display = "block";
                    spark.style.top = `${Math.random() * 12 + 50}%`;
                    spark.style.left = `${Math.random() * 30 + 35}%`;
                    spark.style.opacity = "25%";
                    setTimeout(() => {
                      spark.style.opacity = "20%";
                      setTimeout(() => {
                        spark.style.opacity = "15%";
                        setTimeout(() => {
                          spark.style.opacity = "10%";
                          setTimeout(() => {
                            spark.style.opacity = "5%";
                            setTimeout(() => {
                              spark.style.display = "none";
                              loopCount++;
                              setTimeout(runSparkEffect, 34);
                            }, 33);
                          }, 33);
                        }, 34);
                      }, 33);
                    }, 33);
                  }
                  runSparkEffect();
                }
                if(darkness && Math.random() < 0.2 && flashlight_off.className == 'flashlight_off') {
                  let creepy = [
                    "whisper1",
                    "whisper2",
                    "whisper3",
                    "whisper4",
                    "whisper5"
                  ];
                  creepy = creepy[Math.floor(Math.random() * 5)];
                  playSound(`whisper/${creepy}`, 0.1);
                  setInterval(() => {
                    if (flashlight_off.className != 'flashlight_off') {
                      stopSound();
                      clearInterval(this);
                    }
                  }, 100);
                }
                return 'flashlight2';
              },
              flashlight2: () => 'flashlight5',
              flashlight3: () => {
                default_flashlight = 2;
                return 'flashlight2';
              },
              flashlight4: () => 'flashlight1',
              flashlight5: () => 'flashlight8',
              flashlight6: () => 'flashlight3',
              flashlight7: () => 'flashlight4',
              flashlight8: () => default_flashlight == 1 ? 'flashlight9' : 'flashlight7',
              flashlight9: () => 'flashlight6',
            };
            const nextClass = transitions[baseClass]?.() ?? 'flashlight5';
            flashlight.className = nextClass + suffix;
          }
        }, 1000);

        var position = default_position;
        var direction = default_direction;
        var map = default_map;
        var key = 0;
        var alive = true;
        var animation = true;
        var firsttime = true;
        var double = false;
        var darkness = true;
        var noclip = false;
        
        let sound;
        function playSound(soundpath, volume = 1) {
          sound = new Audio(`./sound/${soundpath}.mp3`);
          sound.volume = volume;
          sound.play();
        }
        function stopSound() {
          sound.pause();
          sound.currentTime = 0;
        }

        var keyarr = {};
        let input = false;
        document.onkeydown = function(e){
          e = e || event;
          keyarr[e.keyCode] = true;
          if(keyarr[18] && keyarr[16] && keyarr[66]){
            if(darkness == true) {
              darkness = false;
              flashlight.className = 'flashlight5';
              flashlight_off.className = '';
              document.getElementById("load").style.backgroundColor = "white";
              render();
            } else {
              darkness = true;
              flashlight.className = 'flashlight5_dark';
              document.getElementById("load").style.backgroundColor = "black";
              render();
            }
          }
          if (keyarr[18] && keyarr[16] && keyarr[78]) {
            if(noclip == true) {
              noclip = false;
              render();
            } else {
              noclip = true;
              render();
            }
          }
          if (keyarr[18] && keyarr[16] && keyarr[77]) {
            if (input) {
              const value = document.getElementById("inputmap").value;
              if(value in defaultmap) {
                restart(defaultmap[value]);
              }
              document.getElementById("inputmap").style.display = "none";
              document.getElementById("inputmap").value = "";
              input = false;
            } else {
              document.getElementById("inputmap").style.display = "block";
              document.getElementById("inputmap").focus();
              input = true;
            }
          }
        }
        document.onkeyup = function (e) {
          e = e || event;
          keyarr[e.keyCode] = false;

          if (e.keyCode === 77) {
            promptUsed = false;
          }
        };

        var body = document.getElementById("body");

        function Fullscreen() {
            if (body.requestFullscreen) {
              body.requestFullscreen();
            } else if (body.webkitRequestFullscreen) {
              body.webkitRequestFullscreen();
            } else if (body.msRequestFullscreen) {
              body.msRequestFullscreen();
            }
          }
          document.body.addEventListener("click", Fullscreen);

        function play() {
          Fullscreen();
          animation = false;
          minimap.style.display = "block";

          setTimeout(() => {
            firsttime = false;
          }, 50);

          document.body.removeEventListener("click", play);

          setTimeout(() => {
            blackout2.style.opacity = "0.75";
            click.style.opacity = "0.75";
            setTimeout(() => {
              blackout2.style.opacity = "0.5";
              click.style.opacity = "0.5";
              setTimeout(() => {
                blackout2.style.opacity = "0.25";
                click.style.opacity = "0.25";
                setTimeout(() => {
                  click.style.opacity = "0";
                  blackout2.style.opacity = "1";
                  blackout2.classList.remove("blackout");
                }, 200);
              }, 175);
            }, 150);
          }, 125);

          if(window.screen.width >= 768) {
            setTimeout(() => {
              keybind.style.opacity = "0.25";
              setTimeout(() => {
                keybind.style.opacity = "0.5";
                setTimeout(() => {
                  keybind.style.opacity = "0.75";
                  setTimeout(() => {
                    keybind.style.opacity = "1";
                    setTimeout(() => {
                      keybind.style.opacity = "0.5";
                      setTimeout(() => {
                        keybind.style.opacity = "0";
                      }, 200);
                    }, 10000);
                  }, 200);
                }, 175);
              }, 150);
            }, 125);
          }
        }

        function continued() {
          animation = false;
          blackout2.classList.remove("blackout");
          click.style.opacity = "0";
          double = true;
          setTimeout(() => {
            double = false;
          }, 500);
          document.removeEventListener("click", continued);
        }

        var pos1_object = document.getElementById("pos1_object");
        var pos2_object = document.getElementById("pos2_object");
        var pos3_object = document.getElementById("pos3_object");
        var pos4_object = document.getElementById("pos4_object");
        var pos5_object = document.getElementById("pos5_object");
        var pos6_object = document.getElementById("pos6_object");
        var pos7_object = document.getElementById("pos7_object");
        var pos8_object = document.getElementById("pos8_object");
        var pos9_object = document.getElementById("pos9_object");
        var pos10_object = document.getElementById("pos10_object");
        var pos11_object = document.getElementById("pos11_object");
        var pos12_object = document.getElementById("pos12_object");
        var pos13_object = document.getElementById("pos13_object");
        var pos14_object = document.getElementById("pos14_object");
        var pos15_object = document.getElementById("pos15_object");
        
        var pos1_property = document.getElementById("pos1_property");
        var pos2_property = document.getElementById("pos2_property");
        var pos3_property = document.getElementById("pos3_property");
        var pos4_property = document.getElementById("pos4_property");
        var pos5_property = document.getElementById("pos5_property");
        var pos6_property = document.getElementById("pos6_property");
        var pos7_property = document.getElementById("pos7_property");
        var pos8_property = document.getElementById("pos8_property");
        var pos9_property = document.getElementById("pos9_property");
        var pos10_property = document.getElementById("pos10_property");
        var pos11_property = document.getElementById("pos11_property");
        var pos12_property = document.getElementById("pos12_property");
        var pos13_property = document.getElementById("pos13_property");
        var pos14_property = document.getElementById("pos14_property");
        var pos15_property = document.getElementById("pos15_property");

        var pos1_dark = document.getElementById("pos1_dark");
        var pos2_dark = document.getElementById("pos2_dark");
        var pos3_dark = document.getElementById("pos3_dark");
        var pos4_dark = document.getElementById("pos4_dark");
        var pos5_dark = document.getElementById("pos5_dark");
        var pos6_dark = document.getElementById("pos6_dark");
        var pos7_dark = document.getElementById("pos7_dark");
        var pos8_dark = document.getElementById("pos8_dark");
        var pos9_dark = document.getElementById("pos9_dark");
        var pos10_dark = document.getElementById("pos10_dark");
        var pos11_dark = document.getElementById("pos11_dark");
        var pos12_dark = document.getElementById("pos12_dark");
        var pos13_dark = document.getElementById("pos13_dark");
        var pos14_dark = document.getElementById("pos14_dark");
        var pos15_dark = document.getElementById("pos15_dark");

        var flashlight = document.getElementById("flashlight");
        var flashlight_off = document.getElementById("flashlight_off");
        var spike1 = document.getElementById("spike1");
        var spike2 = document.getElementById("spike2");
        var spike3 = document.getElementById("spike3");
        var spike4 = document.getElementById("spike4");
        var died = document.getElementById("died");
        var locked = document.getElementById("locked");
        var click = document.getElementById("click");
        var tips = document.getElementById("tips");
        var dirindicator = document.getElementById("dirindicator");
        var keybind = document.getElementById("keybind");

        var blackout = document.getElementById("blackout");
        var blackout2 = document.getElementById("blackout2");

        var map1 = document.getElementById("map1");
        var map2 = document.getElementById("map2");
        var map3 = document.getElementById("map3");
        var map4 = document.getElementById("map4");
        var map5 = document.getElementById("map5");
        var map6 = document.getElementById("map6");
        var map7 = document.getElementById("map7");
        var map8 = document.getElementById("map8");
        var map9 = document.getElementById("map9");
        var minimap = document.getElementById("minimap");

        var dirpos1, dirpos2, dirpos3, dirpos4, dirpos5,
          dirpos6, dirpos7, dirpos8, dirpos9, dirpos10,
          dirpos11, dirpos12, dirpos13, dirpos14, dirpos15;

        const pos_objects = [
          pos1_object, pos2_object, pos3_object, pos4_object, pos5_object,
          pos6_object, pos7_object, pos8_object, pos9_object, pos10_object,
          pos11_object, pos12_object, pos13_object, pos14_object, pos15_object
        ];
        const pos_properties = [
          pos1_property, pos2_property, pos3_property, pos4_property, pos5_property,
          pos6_property, pos7_property, pos8_property, pos9_property, pos10_property,
          pos11_property, pos12_property, pos13_property, pos14_property, pos15_property
        ];
        const pos_darks = [
          pos1_dark, pos2_dark, pos3_dark, pos4_dark, pos5_dark,
          pos6_dark, pos7_dark, pos8_dark, pos9_dark, pos10_dark,
          pos11_dark, pos12_dark, pos13_dark, pos14_dark, pos15_dark
        ];

        function clear() {
          for (let i = 0; i < 15; i++) {
            pos_objects[i].className = '';
            pos_properties[i].className = '';
            pos_darks[i].className = '';
          }
        }

        function death(deathmsg) {
          if(Math.random() > 0.2) {
            document.getElementById("deathmsg").innerHTML = deathmsg;
          } else {
            let funtips = [
              "Tips: Keep moving",
              "Tips: Watch your surroundings",
              "Tips: Dont rush in",
              "Tips: Learn patterns",
              "Tips: Stay alert",
            ];
            document.getElementById("deathmsg").innerHTML = funtips[Math.floor(Math.random() * 5)];
          }
          alive = false;
          animation = true;

          document.getElementById('keycountopacity').style.opacity = "0";
          blackout.classList.add("blackout");
          minimap.style.display = "none";
          dirindicator.style.display = "none";

          blackout.style.opacity = "0.25";
          setTimeout(() => {
            blackout.style.opacity = "0.5";
            setTimeout(() => {
              blackout.style.opacity = "0.75";
              setTimeout(() => {
                blackout.style.opacity = "1";
                setTimeout(() => {
                  spike1.classList.add("spike1");
                  setTimeout(() => {
                    spike2.classList.add("spike2");
                    setTimeout(() => {
                      spike3.classList.add("spike3");
                      setTimeout(() => {
                        spike4.classList.add("spike4");``
                        setTimeout(() => {
                          died.classList.add("died");
                          document.getElementById("margintop").classList.remove("margintop");

                          animation = false;

                          setTimeout(() => {
                            tips.style.opacity = "0.25";
                            setTimeout(() => {
                              tips.style.opacity = "0.5";
                              setTimeout(() => {
                                tips.style.opacity = "0.75";
                                setTimeout(() => {
                                  tips.style.opacity = "1";
                                }, 175);
                              }, 150);
                            }, 125);
                          }, 100);
                        }, 125);
                      }, 150);
                    }, 175);
                  }, 200);
                }, 1000);
              }, 150);
            }, 175);
          }, 200);
        }

        function render() {

          clear();

          if (map[position[0]][position[1]] == 0 && noclip == false) {
            death("Tips: Dont fall!");
            return;
          }
          
          const dirOffsets = {
            north: [
              [-1, -1], [-1, 0], [-1, +1],
              [-2, -2], [-2, -1], [-2, 0], [-2, +1], [-2, +2],
              [-3, -3], [-3, -2], [-3, -1], [-3, 0], [-3, +1], [-3, +2], [-3, +3]
            ],
            east: [
              [-1, +1], [0, +1], [+1, +1],
              [-2, +2], [-1, +2], [0, +2], [+1, +2], [+2, +2],
              [-3, +3], [-2, +3], [-1, +3], [0, +3], [+1, +3], [+2, +3], [+3, +3]
            ],
            south: [
              [+1, +1], [+1, 0], [+1, -1],
              [+2, +2], [+2, +1], [+2, 0], [+2, -1], [+2, -2],
              [+3, +3], [+3, +2], [+3, +1], [+3, 0], [+3, -1], [+3, -2], [+3, -3]
            ],
            west: [
              [+1, -1], [0, -1], [-1, -1],
              [+2, -2], [+1, -2], [0, -2], [-1, -2], [-2, -2],
              [+3, -3], [+2, -3], [+1, -3], [0, -3], [-1, -3], [-2, -3], [-3, -3]
            ]
          };
          const dirposArr = Array(15).fill(0);
          const offsets = dirOffsets[direction];
          for (let i = 0; i < 15; i++) {
            const [dr, dc] = offsets[i];
            const r = position[0] + dr;
            const c = position[1] + dc;
            if (
              r >= 0 && r < map.length &&
              c >= 0 && c < map[0].length
            ) {
              dirposArr[i] = map[r][c];
            }
          }
          [
            dirpos1, dirpos2, dirpos3, dirpos4, dirpos5,
            dirpos6, dirpos7, dirpos8, dirpos9, dirpos10,
            dirpos11, dirpos12, dirpos13, dirpos14, dirpos15
          ] = dirposArr;

          const posObjects = [pos1_object, pos2_object, pos3_object, pos4_object, pos5_object,
            pos6_object, pos7_object, pos8_object, pos9_object, pos10_object,
            pos11_object, pos12_object, pos13_object, pos14_object, pos15_object];
          const posProperties = [pos1_property, pos2_property, pos3_property, pos4_property, pos5_property,
            pos6_property, pos7_property, pos8_property, pos9_property, pos10_property,
            pos11_property, pos12_property, pos13_property, pos14_property, pos15_property];
          const posDarks = [pos1_dark, pos2_dark, pos3_dark, pos4_dark, pos5_dark,
            pos6_dark, pos7_dark, pos8_dark, pos9_dark, pos10_dark,
            pos11_dark, pos12_dark, pos13_dark, pos14_dark, pos15_dark];
          const typeMap = {
            10: { obj: 'floor', propBase: null, propSuffix: '' },
            20: { obj: 'wall', propBase: null, propSuffix: '' },
            21: { obj: 'wall', propBase: 'key', propSuffix: '' },
            22: { obj: 'wall', propBase: 'key', propSuffix: '_empty' },
            23: { obj: 'wall', propBase: 'switch', propSuffix: '' },
            24: { obj: 'wall', propBase: 'switch', propSuffix: '_on' },
            25: { obj: 'wall', propBase: 'door', propSuffix: '' },
            30: { obj: 'gate', propBase: null, propSuffix: '' }
          };
          let smth = false;
          let glc = false;
          for (let i = 0; i < 15; i++) {
            let off = [false, "offset"];
            const code = dirposArr ? dirposArr[i] : [dirpos1, dirpos2, dirpos3, dirpos4, dirpos5, dirpos6, dirpos7, dirpos8, dirpos9, dirpos10, dirpos11, dirpos12, dirpos13, dirpos14, dirpos15][i];
            const cfg = typeMap[code];
            if (!cfg) continue;
            if (Math.random() < 0.01 && code == 20) {
              smth = true;
              posObjects[i].classList.add(`${cfg.obj}${i + 1}`);
              const rand = Math.random();
              const pos1 = i + 1;
              if (rand < 0.5 && ![2, 3, 7, 8, 14, 15].includes(pos1)) {
                posObjects[i].classList.add(`offset`);
                off = [true, "offset"];
              } else if (rand >= 0.5 && ![1, 2, 4, 5, 9, 10].includes(pos1)) {
                posObjects[i].classList.add(`offset2`);
                off = [true, "offset2"];
              }
            } else if (Math.random() < 0.01 && code == 20) {
              cfg.obj = 'glitch';
              smth = true;
              glc = true;
              posObjects[i].classList.add(`${cfg.obj}${i + 1}`);
              cfg.obj = 'wall';
            } else {
              posObjects[i].classList.add(`${cfg.obj}${i + 1}`);
            }
            if (cfg.propBase) {
              posProperties[i].classList.add(
                `${cfg.propBase}${i + 1}${cfg.propSuffix}`
              );
            }
            if (darkness) {
              posDarks[i].classList.add(`${cfg.obj}${i + 1}_dark`);
              if (off[0]) {
                posDarks[i].classList.add(off[1]);
              }
            }
          }
          if(smth) {
            setTimeout(() => {
              render();
            }, glc ? 500 : 1000);
          }
        }
        
        const controls = [
          { id: 'buttonup', action: up },
          { id: 'buttondown', action: down },
          { id: 'buttonleft', action: left },
          { id: 'buttonright', action: right },
          { id: 'buttonturnleft', action: turnleft },
          { id: 'buttonturnright', action: turnright }
        ];
        controls.forEach(({ id, action }) => {
          document.getElementById(id).addEventListener('click', () => {
            if (!animation) {
              if (alive) {
                action();
                render();
              } else {
                restart();
              }
            }
          });
        });
        let minimaptimeout;
        if(window.screen.width < 768) {
          pos15_object.addEventListener("click", () => {
            if (animation == false) {
              if (alive) {
                let turnflashlight = false;
                let switchtrigger = false;
                let keytrigger = false;
                let activate;
                let dirpos;
                const moveOffsets = {
                  north: [-1, 0],
                  east: [0, +1],
                  south: [+1, 0],
                  west: [0, -1]
                };
                const [dr, dc] = moveOffsets[direction];
                const r = position[0] + dr;
                const c = position[1] + dc;
                dirpos = [r, c];
                if (r < 0 || r >= map.length || c < 0 || c >= map[0].length) {
                  turnflashlight = true;
                  return;
                }
                let cell = map[r][c];
                if (cell === 21) {
                  map[r][c] = 22;
                  key++;
                  document.getElementById("keycount").innerHTML = key;
                }
                else if (cell === 23) {
                  map[r][c] = 24;
                  switchtrigger = true;
                  activate = true;
                }
                else if (cell === 24) {
                  map[r][c] = 23;
                  switchtrigger = true;
                  activate = false;
                }
                else if (cell === 30) {
                  keytrigger = true;
                }
                else if (cell === 25) {
                  nextmap();
                }
                else {
                  turnflashlight = true;
                }
                if(switchtrigger) {
                  switchchange(dirpos[0], dirpos[1], activate);
                }
                if(keytrigger) {
                  keychange(dirpos[0], dirpos[1]);
                }
                if(turnflashlight) {
                  if(darkness) {
                    if(flashlight_off.className == 'flashlight_off') {
                      flashlight_off.className = '';
                      minimap.style.opacity = "1";
                      clearTimeout(minimaptimeout);
                    } else {
                      flashlight_off.className = 'flashlight_off';
                      minimap.style.opacity = "0.1";
                      minimaptimeout = setTimeout(() => {
                        minimap.style.opacity = "0.05";
                        minimaptimeout = setTimeout(() => {
                          minimap.style.opacity = "0";
                        }, 500);
                      }, 5000);
                    }
                  }
                }
                render();
              } else {
                restart();
              }
            }
          })
        }

        const switchLocations = [
          { map: 1, row: 11, col: 13, targetRow: 15, targetCol: 13 },
          { map: 1, row: 11, col: 13, targetRow: "5", targetCol: "7" },//reverse switch
          { map: 2, row: 15, col: 8, targetRow: 18, targetCol: 5 }
          // Add more switch locations here
        ];

        const keyLocations = [
          { map: 1, row: 4, col: 11 },
          // Add more gate locations here
        ];

        const lockedMessageLocations = [
          ...switchLocations.map(loc => ({ 
            map: loc.map, 
            row: typeof loc.targetRow === 'string' ? parseInt(loc.targetRow) : loc.targetRow, 
            col: typeof loc.targetCol === 'string' ? parseInt(loc.targetCol) : loc.targetCol
          })),
          ...keyLocations
        ];
        function switchchange(row, col, activate) {
          for (const switchLoc of switchLocations) {
            if (lvl_map === switchLoc.map && row === switchLoc.row && col === switchLoc.col) {
              const isReverse = typeof switchLoc.targetRow === 'string';
              const targetRow = isReverse ? parseInt(switchLoc.targetRow) : switchLoc.targetRow;
              const targetCol = isReverse ? parseInt(switchLoc.targetCol) : switchLoc.targetCol;
              map[targetRow][targetCol] = activate 
              ? (isReverse ? 30 : 10) 
              : (isReverse ? 10 : 30);
            }
          }
        }
        function keychange(row, col) {
          let isGateUnlocked = false;
          if (key > 0) {
            for (const keyLoc of keyLocations) {
              if (lvl_map === keyLoc.map && row === keyLoc.row && col === keyLoc.col) {
                if(Math.random() > 0.2) {
                  map[keyLoc.row][keyLoc.col] = 10;
                  key--;
                  document.getElementById("keycount").innerHTML = key;
                } else {
                  locked.textContent = "Jammed";
                  locked.style.opacity = "1";
                  clearTimeout(lockedtimeout);
                  lockedtimeout = setTimeout(() => {
                    locked.style.opacity = "0.5";
                    lockedtimeout = setTimeout(() => {
                      locked.style.opacity = "0";
                    }, 200);
                  }, 200);
                }
                isGateUnlocked = true;
                break;
              }
            }
          }
          if (!isGateUnlocked) {
            for (const loc of lockedMessageLocations) {
              if (lvl_map === loc.map && row === loc.row && col === loc.col) {
                locked.textContent = "Its Locked";
                locked.style.opacity = "1";
                clearTimeout(lockedtimeout);
                lockedtimeout = setTimeout(() => {
                  locked.style.opacity = "0.5";
                  lockedtimeout = setTimeout(() => {
                    locked.style.opacity = "0";
                  }, 200);
                }, 1000);
                break;
              }
            }
          }
        }
        function minimapmove(dir) {
          const maps = [
            [map1, map2, map3],
            [map4, map5, map6],
            [map7, map8, map9]
          ];
          const slideConfig = {
            up: {
              init: [{ row: 0, prop: 'top', value: '0.2cm' }, { row: 1, prop: 'top', value: '0.8cm' }],
              fadeRow: 2,
              delayed: [{ row: 0, prop: 'top', value: '0cm' }, { row: 1, prop: 'top', value: '0.6cm' }]
            },
            down: {
              init: [{ row: 1, prop: 'top', value: '0.4cm' }, { row: 2, prop: 'top', value: '1.0cm' }],
              fadeRow: 0,
              delayed: [{ row: 1, prop: 'top', value: '0.6cm' }, { row: 2, prop: 'top', value: '1.2cm' }]
            },
            left: {
              init: [{ col: 0, prop: 'left', value: '0.2cm' }, { col: 1, prop: 'left', value: '0.8cm' }],
              fadeCol: 2,
              delayed: [{ col: 0, prop: 'left', value: '0cm' }, { col: 1, prop: 'left', value: '0.6cm' }]
            },
            right: {
              init: [{ col: 1, prop: 'left', value: '0.4cm' }, { col: 2, prop: 'left', value: '1.0cm' }],
              fadeCol: 0,
              delayed: [{ col: 1, prop: 'left', value: '0.6cm' }, { col: 2, prop: 'left', value: '1.2cm' }]
            }
          };
          const cfg = slideConfig[dir];
          if (!cfg) return;
          cfg.init.forEach(({ row, col, prop, value }) => {
            if (row != null) maps[row].forEach(cell => cell.style[prop] = value);
            else maps.forEach(rowArr => rowArr[col].style[prop] = value);
          });
          if (cfg.fadeRow != null) {
            maps[cfg.fadeRow].forEach(cell => {
              cell.style.backgroundColor = 'transparent';
              cell.style.border = 'none';
            });
          } else {
            maps.forEach(rowArr => {
              rowArr[cfg.fadeCol].style.backgroundColor = 'transparent';
              rowArr[cfg.fadeCol].style.border = 'none';
            });
          }
          setTimeout(() => {
            cfg.delayed.forEach(({ row, col, prop, value }) => {
              if (row != null) maps[row].forEach(cell => cell.style[prop] = value);
              else maps.forEach(rowArr => rowArr[col].style[prop] = value);
            });
          }, 200);
        }
        function renderminimap(dir) {
          const minimapDirections = {
            up: { north: 'up', east: 'right', south: 'down', west: 'left' },
            down: { north: 'down', east: 'left', south: 'up', west: 'right' },
            left: { north: 'left', east: 'up', south: 'right', west: 'down' },
            right: { north: 'right', east: 'down', south: 'left', west: 'up' }
          };
          const move = minimapDirections[dir]?.[direction];
          if (move) minimapmove(move);
          setTimeout(() => {
            const mapCells = [
              map1, map2, map3,
              map4, map5, map6,
              map7, map8, map9
            ];
            const offsets = [
              [-1, -1], [-1, 0], [-1, +1],
              [0, -1], [0, 0], [0, +1],
              [+1, -1], [+1, 0], [+1, +1]
            ];
            const isFloorOrGate = v => v === 10 || v === 30;
            const isWallVariant = v => v >= 20 && v <= 25;
            mapCells.forEach(cell => {
              cell.style.backgroundColor = 'transparent';
              cell.style.border = 'none';
            });
            offsets.forEach(([dr, dc], idx) => {
              const r = position[0] + dr;
              const c = position[1] + dc;
              const cell = mapCells[idx];
              if (r < 0 || r >= map.length || c < 0 || c >= map[0].length) return;
              const tile = map[r][c];
              if (isFloorOrGate(tile)) {
                cell.style.backgroundColor = 'white';
                cell.style.border = 'solid 1px lightgray';
              }
              else if (isWallVariant(tile)) {
                cell.style.backgroundColor = 'rgba(211, 211, 211, 0.3)';
                cell.style.border = 'solid 1px rgba(211, 211, 211, 0.2)';
              }
            });
          }, 200);
        }

        let speed = false;
        let lastCall = 0;
        function handleMove(buttonId, dirCmd) {
          const now = performance.now();
          if(Math.random() < 0.01) {
            return;
          } else if (Math.random() < 0.1 && !speed && (now-lastCall) < 1000) {
            setTimeout(() => {
              speed = true;
              handleMove(buttonId, dirCmd);
              render();
              setTimeout(() => {
                speed = false;
              }, 1000);
            }, 10);
          }
          lastCall = now;
          if(Math.random() < 0.1) {
            document.getElementById("hm").style.display = "block";
            document.getElementById("hm").style.top = `${Math.random() * 30 + 23}%`;
            document.getElementById("hm").style.left = `${Math.random() * 30 + 35}%`;
            setTimeout(() => {
              document.getElementById("hm").style.display = "none";
            }, 1000);
          }
          const moveOffsets = {
            north: [-1, 0],
            east: [0, 1],
            south: [1, 0],
            west: [0, -1]
          };
          const directionMap = {
            up: {
              north: moveOffsets.north,
              east: moveOffsets.east,
              south: moveOffsets.south,
              west: moveOffsets.west
            },
            down: {
              north: moveOffsets.south,
              east: moveOffsets.west,
              south: moveOffsets.north,
              west: moveOffsets.east
            },
            left: {
              north: moveOffsets.west,
              east: moveOffsets.north,
              south: moveOffsets.east,
              west: moveOffsets.south
            },
            right: {
              north: moveOffsets.east,
              east: moveOffsets.south,
              south: moveOffsets.west,
              west: moveOffsets.north
            }
          };
          const [dr, dc] = directionMap[dirCmd][direction];
          const r = position[0] + dr;
          const c = position[1] + dc;
          if (
            noclip ||
            (![20, 21, 22, 23, 24, 25, 30].includes(map[r]?.[c]))
          ) {
            position[0] = r;
            position[1] = c;
          }
          const btn = document.getElementById(buttonId);
          btn.style.transition = "none";
          btn.style.transform = "scale(1.05)";
          setTimeout(() => {
            btn.style.transition = "transform 0.2s ease-out";
            btn.style.transform = "scale(1)";
          }, 1);
          renderminimap(dirCmd);
        }
        function up() {
          handleMove("buttonup", "up");
        }
        function down() {
          handleMove("buttondown", "down");
        }
        function left() {
          handleMove("buttonleft", "left");
        }
        function right() {
          handleMove("buttonright", "right");
        }

        const turnConfig = {
          turnleft: {
            nextDir: { north: 'west', west: 'south', south: 'east', east: 'north' },
            arrow: { north: 'left', west: 'down', south: 'right', east: 'up' },
            rotation: 45,
            buttonId: 'buttonturnleft'
          },
          turnright: {
            nextDir: { north: 'east', east: 'south', south: 'west', west: 'north' },
            arrow: { north: 'right', east: 'down', south: 'left', west: 'up' },
            rotation: -45,
            buttonId: 'buttonturnright'
          }
        };
        function handleTurn(cmd) {
          const cfg = turnConfig[cmd];
          const imgName = cfg.arrow[direction];
          dirindicator.style.backgroundImage = `url('./sprite/arrow/${imgName}-arrow.png')`;
          direction = cfg.nextDir[direction];
          dirindicator.style.transform = `rotate(${cfg.rotation}deg)`;
          setTimeout(() => {
            dirindicator.style.transform = 'rotate(0)';
          }, 300);
          const btn = document.getElementById(cfg.buttonId);
          btn.style.transition = 'none';
          btn.style.transform = 'scale(1.05)';
          setTimeout(() => {
            btn.style.transition = 'transform 0.2s ease-out';
            btn.style.transform = 'scale(1)';
          }, 1);
        }
        function turnleft() { handleTurn('turnleft'); }
        function turnright() { handleTurn('turnright'); }

        function restart(mapchange) {
          animation = true;

          blackout2.classList.add("blackout");
          blackout2.style.opacity = "0.25";
          setTimeout(() => {
            blackout2.style.opacity = "0.5";
            setTimeout(() => {
              blackout2.style.opacity = "0.75";
              setTimeout(() => {
                blackout2.style.opacity = "1";

                if(mapchange) {
                  changemap(mapchange);
                }

                position = default_position;
                direction = default_direction;
                if (current_map == defaultmap["random"]) {
                  key = 1;
                } else {
                  key = 0;
                }
                document.getElementById('keycountopacity').style.opacity = "1";
                document.getElementById("keycount").innerHTML = key;
                map = default_map;
                alive = true;
                animation = false;
                
                tips.style.opacity = "0";
                blackout.classList.remove("blackout");
                spike1.classList.remove("spike1");
                spike2.classList.remove("spike2");
                spike3.classList.remove("spike3");
                spike4.classList.remove("spike4");
                died.classList.remove("died");
                document.getElementById("margintop").classList.add("margintop");
                flashlight_off.className = '';
                minimap.style.display = "block";
                minimap.style.opacity = "1";
                dirindicator.style.display = "block";
                clearTimeout(minimaptimeout);

                render();
                renderminimap();
                switch (direction) {
                  case "north":
                    dirindicator.style.backgroundImage = "url('./sprite/arrow/up-arrow.png')"
                    break;
                  case "east":
                    dirindicator.style.backgroundImage = "url('./sprite/arrow/right-arrow.png')"
                    break;
                  case "south":
                    dirindicator.style.backgroundImage = "url('./sprite/arrow/down-arrow.png')"
                    break;
                  case "west":
                    dirindicator.style.backgroundImage = "url('./sprite/arrow/left-arrow.png')"
                    break;
                }

                setTimeout(() => {
                  blackout2.style.opacity = "0.75";
                  setTimeout(() => {
                    blackout2.style.opacity = "0.5";
                    setTimeout(() => {
                      blackout2.style.opacity = "0.25";
                      setTimeout(() => {
                        blackout2.style.opacity = "0";
                        blackout2.classList.remove("blackout");
                        blackout2.style.opacity = "1";
                      }, 200);
                    }, 175);
                  }, 150);
                }, 125);
              }, 150);
            }, 175);
          }, 200);
        }

        body.addEventListener("keydown", function(e) {
          if (e.repeat) return;

          if (animation == false) {

            if (e.code == "KeyR") {
              restart();
            }

            if (alive) {
              if (e.code == "ArrowLeft") {
                turnleft();
              } else if (e.code == "ArrowRight") {
                turnright();
              }

              if (e.code == "KeyW") {
                up();
              } else if (e.code == "KeyA") {
                left();
              } else if (e.code == "KeyS") {
                down();
              } else if (e.code == "KeyD") {
                right();
              }

              if (e.code == "KeyF") {
                if(darkness) {
                  if(flashlight_off.className == 'flashlight_off') {
                    flashlight_off.className = '';
                    minimap.style.opacity = "1";
                    clearTimeout(minimaptimeout)
                  } else {
                    flashlight_off.className = 'flashlight_off';
                    minimap.style.opacity = "0.05";
                    minimaptimeout = setTimeout(() => {
                      minimap.style.opacity = "0.025";
                      minimaptimeout = setTimeout(() => {
                        minimap.style.opacity = "0";
                      }, 500);
                    }, 5000);
                  }
                }
              }

              if (e.code == "KeyE") {
                let switchtrigger = false;
                let keytrigger = false;
                let activate;
                let dirpos;
                const moveOffsets = {
                  north: [-1, 0],
                  east: [0, +1],
                  south: [+1, 0],
                  west: [0, -1]
                };
                const cellHandlers = {
                  21: (r, c) => { map[r][c] = 22; key++; document.getElementById("keycount").innerHTML = key; },
                  23: (r, c) => { map[r][c] = 24; switchtrigger = true; activate = true; },
                  24: (r, c) => { map[r][c] = 23; switchtrigger = true; activate = false; },
                  30: (r, c) => { keytrigger = true; },
                  25: (r, c) => { nextmap(); }
                };
                const [dr, dc] = moveOffsets[direction];
                const r = position[0] + dr;
                const c = position[1] + dc;
                if (r < 0 || r >= map.length || c < 0 || c >= map[0].length) {
                  turnflashlight = true;
                } else {
                  const val = map[r][c];
                  (cellHandlers[val] || (() => { turnflashlight = true; }))(r, c);
                }
                dirpos = [r, c];
                if(switchtrigger) {
                  switchchange(dirpos[0], dirpos[1], activate);
                }
                if(keytrigger) {
                  keychange(dirpos[0], dirpos[1]);
                }
              }

              render();

            }
          }
        });

        click.style.opacity = "1";
        
        setTimeout(() => {
          loading.style.opacity = "0";
          document.getElementById("load").style.opacity = "1";
          const arrowMap = {
            north: 'up',
            east: 'right',
            south: 'down',
            west: 'left'
          };
          dirindicator.style.backgroundImage =
            `url('./sprite/arrow/${arrowMap[direction]}-arrow.png')`;
        }, 1575);

        var loading = document.getElementById('loading');

        function wait(ms) {
          return new Promise(resolve => setTimeout(resolve, ms));
        }
        const loadSteps = [
          {
            delay: 100,
            action() {
              for (let i = 1; i <= 15; i++) {
                window[`pos${i}_object`].classList.add(`floor${i}`);
                window[`pos${i}_property`].classList.add(`key${i}`);
                window[`pos${i}_dark`].classList.add(`floor${i}_dark`);
              }
              spike1.classList.add("spike1");
              spike2.classList.add("spike2");
              spike3.classList.add("spike3");
              spike4.classList.add("spike4");
              blackout.classList.add("blackout");
              died.classList.add("died");
              flashlight.className = 'flashlight1_dark';
              dirindicator.style.backgroundImage = "url('./sprite/arrow/up-arrow.png')";
              flashlight_off.className = 'flashlight_off';
              loading.innerHTML = "Loading... (54/205)";
            }
          },
          {
            delay: 100,
            action() {
              for (let i = 1; i <= 15; i++) {
                window[`pos${i}_object`].classList.add(`wall${i}`);
                window[`pos${i}_property`].classList.add(`key${i}_empty`);
                window[`pos${i}_dark`].classList.add(`wall${i}_dark`);
              }
              flashlight.className = 'flashlight2_dark';
              dirindicator.style.backgroundImage = "url('./sprite/arrow/down-arrow.png')";
              loading.innerHTML = "Loading... (101/205)";
            }
          },
          {
            delay: 100,
            action() {
              for (let i = 1; i <= 15; i++) {
                window[`pos${i}_object`].classList.add(`gate${i}`);
                window[`pos${i}_property`].classList.add(`switch${i}`);
                window[`pos${i}_dark`].classList.add(`gate${i}_dark`);
              }
              flashlight.className = 'flashlight3_dark';
              dirindicator.style.backgroundImage = "url('./sprite/arrow/left-arrow.png')";
              loading.innerHTML = "Loading... (148/205)";
            }
          },
          {
            delay: 100,
            action() {
              for (let i = 1; i <= 15; i++) {
                window[`pos${i}_property`].classList.add(`switch${i}_on`);
              }
              flashlight.className = 'flashlight4_dark';
              dirindicator.style.backgroundImage = "url('./sprite/arrow/right-arrow.png')";
              loading.innerHTML = "Loading... (165/205)";
            }
          },
          {
            delay: 100,
            action() {
              for (let i = 1; i <= 15; i++) {
                window[`pos${i}_property`].classList.add(`door${i}`);
              }
              flashlight.className = 'flashlight5_dark';
              loading.innerHTML = "Loading... (181/205)";
            }
          },
          {
            delay: 100,
            action() {
              flashlight.className = 'flashlight6_dark';
              loading.innerHTML = "Loading... (182/205)";
            }
          },
          {
            delay: 75,
            action() {
              flashlight.className = 'flashlight7_dark';
              loading.innerHTML = "Loading... (183/205)";
            }
          },
          {
            delay: 75,
            action() {
              flashlight.className = 'flashlight8_dark';
              loading.innerHTML = "Loading... (184/205)";
            }
          },
          {
            delay: 75,
            action() {
              flashlight.className = 'flashlight9_dark';
              loading.innerHTML = "Loading... (185/205)";
            }
          },
          {
            delay: 75,
            action() {
              flashlight.className = 'flashlight1';
              loading.innerHTML = "Loading... (186/205)";
            }
          },
          {
            delay: 75,
            action() {
              flashlight.className = 'flashlight2';
              loading.innerHTML = "Loading... (187/205)";
            }
          },
          {
            delay: 75,
            action() {
              flashlight.className = 'flashlight3';
              loading.innerHTML = "Loading... (188/205)";
            }
          },
          {
            delay: 75,
            action() {
              flashlight.className = 'flashlight4';
              loading.innerHTML = "Loading... (189/205)";
            }
          },
          {
            delay: 75,
            action() {
              flashlight.className = 'flashlight5';
              loading.innerHTML = "Loading... (190/205)";
            }
          },
          {
            delay: 75,
            action() {
              flashlight.className = 'flashlight6';
              loading.innerHTML = "Loading... (191/205)";
            }
          },
          {
            delay: 75,
            action() {
              flashlight.className = 'flashlight7';
              loading.innerHTML = "Loading... (192/205)";
            }
          },
          {
            delay: 75,
            action() {
              flashlight.className = 'flashlight8';
              loading.innerHTML = "Loading... (193/205)";
            }
          },
          {
            delay: 75,
            action() {
              flashlight.className = 'flashlight9';
              loading.innerHTML = "Loading... (194/205)";
            }
          },
          {
            delay: 75,
            action() {
              loading.innerHTML = "Loading... (204/205)";
            }
          },
          {
            delay: 75,
            action() {
              flashlight.className = '';
              flashlight_off.className = '';
              spike1.className = '';
              spike2.className = '';
              spike3.className = '';
              spike4.className = '';
              blackout.className = '';
              died.className = '';
              clear();
              render();
              if (firsttime) {
                document.body.addEventListener("click", play);
              }
            }
          }
        ];
        async function runLoader() {
          for (const step of loadSteps) {
            await wait(step.delay);
            step.action();
          }
        }
        runLoader();

        body.onresize = function() {
          if (!firsttime && !double) {
            blackout2.classList.add("blackout");
            blackout2.style.opacity = "0.75";
            click.innerHTML = "Click to continue";
            click.style.opacity = "1";
            animation = true;
            document.addEventListener("click", continued);
          }
        };
      }
      document.body.appendChild(script);
    </script>
  </body>
</html>